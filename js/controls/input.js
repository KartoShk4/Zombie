/* ============================================
   УПРАВЛЕНИЕ КЛАВИАТУРОЙ
   ============================================
   Обработка нажатий клавиш для управления игрой:
   пауза, возобновление игры.
   ============================================ */

// ===== СОСТОЯНИЕ КЛАВИШ =====
/**
 * Объект состояния клавиш
 * Отслеживает, какие клавиши нажаты в данный момент
 */
let keys = {
    p: false,        // Клавиша P (пауза)
    Escape: false    // Клавиша Escape (пауза)
};

// ===== ОБРАБОТКА НАЖАТИЙ КЛАВИШ =====
/**
 * Обработчик нажатия клавиши
 * Обрабатывает клавиши P и Escape для паузы/возобновления игры
 */
window.addEventListener("keydown", e => {
    const k = e.key;

    // Проверяем клавиши паузы (P или Escape)
    if (k === "p" || k === "P" || k === "Escape") {
        // Переключаем паузу только если игра запущена
        if (gameStarted) {
            if (!isPaused) {
                pauseGame();  // Ставим на паузу
            } else {
                resumeGame();  // Возобновляем игру
            }
        }

        // Обновляем состояние клавиш
        keys.p = true;
        keys.Escape = true;
        e.preventDefault();  // Предотвращаем стандартное поведение браузера
    }
});

/**
 * Обработчик отпускания клавиши
 * Сбрасывает состояние клавиш при отпускании
 */
window.addEventListener("keyup", e => {
    if (e.key === "p" || e.key === "P") keys.p = false;
    if (e.key === "Escape") keys.Escape = false;
});
