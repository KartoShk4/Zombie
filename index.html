<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="screen-orientation" content="portrait">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Zombie Survival</title>

    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>

<!-- Canvas –∏–≥—Ä—ã -->
<canvas id="canvas"></canvas>

<!-- –ù–∏–∫–Ω–µ–π–º (–ø–µ—Ä–≤—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–∏ –≤—Ö–æ–¥–µ) -->
<div id="nickname-menu" class="menu">
    <div class="menu-content">
        <h2 class="title">–í–í–ï–î–ò–¢–ï –ù–ò–ö–ù–ï–ô–ú</h2>
        <input type="text" id="nickname-input" class="nickname-input" maxlength="20" placeholder="–í–∞—à –Ω–∏–∫–Ω–µ–π–º">
        <button class="menu-btn" onclick="saveNickname()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    </div>
</div>

<!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
<div id="main-menu" class="menu hidden">
    <div class="menu-content">
        <h1 class="title">ZOMBIE SURVIVE</h1>
        <p id="greeting-text" class="text" style="font-size: 12px; margin-bottom: 20px;"></p>

        <button class="menu-btn" id="continue-btn" onclick="startGame(true)" style="display: none;">‚ñ∂ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        <button class="menu-btn" onclick="startGame(false)">‚ñ∂ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
        <button class="menu-btn" onclick="openShopFromMenu()">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
        <button class="menu-btn" onclick="openLeaderboard()">üèÜ –†–µ–π—Ç–∏–Ω–≥</button>
        <button class="menu-btn" onclick="openAchievements()">üéñÔ∏è –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
        <button class="menu-btn" onclick="openSettings()">‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        <button class="menu-btn" onclick="openHowToPlay()">‚ùì –ö–∞–∫ –∏–≥—Ä–∞—Ç—å</button>
    </div>
</div>

<!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
<div id="settings-menu" class="menu hidden">
    <div class="menu-content">
        <h2 class="title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
        
        <div style="margin: 30px 0;">
            <h3 style="font-size: 18px; color: #ff4444; margin-bottom: 20px;">–ù–∏–∫–Ω–µ–π–º</h3>
            <input type="text" id="settings-nickname-input" class="nickname-input" maxlength="20" placeholder="–í–∞—à –Ω–∏–∫–Ω–µ–π–º">
            <button class="menu-btn" onclick="saveSettingsNickname()" style="width: 200px; margin-top: 10px;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
        
        <div style="margin: 30px 0;">
            <h3 style="font-size: 18px; color: #ff4444; margin-bottom: 20px;">–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</h3>
            
            <button class="menu-btn difficulty-btn" data-difficulty="easy" onclick="selectDifficulty('easy')" style="width: 220px;">
                <span id="difficulty-easy-check" style="opacity: 0;">‚úì </span>–õ–µ–≥–∫–∏–π
            </button>
            <button class="menu-btn difficulty-btn" data-difficulty="normal" onclick="selectDifficulty('normal')" style="width: 220px;">
                <span id="difficulty-normal-check" style="opacity: 0;">‚úì </span>–û–±—ã—á–Ω—ã–π
            </button>
            <button class="menu-btn difficulty-btn" data-difficulty="hard" onclick="selectDifficulty('hard')" style="width: 220px;">
                <span id="difficulty-hard-check" style="opacity: 0;">‚úì </span>–°–ª–æ–∂–Ω—ã–π
            </button>
            
            <p class="text" style="font-size: 12px; margin-top: 20px; color: #aaa;">
                –õ–µ–≥–∫–∏–π: +50% HP, -30% —Å–∫–æ—Ä–æ—Å—Ç—å –∑–æ–º–±–∏, -40% —É—Ä–æ–Ω<br>
                –û–±—ã—á–Ω—ã–π: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è<br>
                –°–ª–æ–∂–Ω—ã–π: -30% HP, +50% —Å–∫–æ—Ä–æ—Å—Ç—å –∑–æ–º–±–∏, +80% —É—Ä–æ–Ω
            </p>
        </div>

        <!-- –ó–≤—É–∫ -->
        <div class="sounds-setting">
            <h3 style="font-size: 18px; color: #ff4444; margin-bottom: 10px;">–ó–≤—É–∫</h3>

            <label class="text" style="font-size: 12px; color: #aaa;">–ì—Ä–æ–º–∫–æ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–æ–≤</label>
            <input id="effects-slider" type="range" min="0" max="100" class="settings-slider pixel-slider">

            <label class="text" style="font-size: 12px; color: #aaa;">–ì—Ä–æ–º–∫–æ—Å—Ç—å –º—É–∑—ã–∫–∏</label>
            <input id="music-slider" type="range" min="0" max="100" class="settings-slider pixel-slider">

            <button class="menu-btn" id="mute-btn" style="width: 220px; margin-top: 15px;">
                üîá –í—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫
            </button>
        </div>



        <button class="menu-btn" onclick="closeSettings()">–ù–∞–∑–∞–¥</button>
    </div>
</div>

<!-- –ö–∞–∫ –∏–≥—Ä–∞—Ç—å -->
<div id="howto-menu" class="menu hidden">
    <div class="menu-content">
        <h2 class="title">–ö–∞–∫ –∏–≥—Ä–∞—Ç—å</h2>
        <p class="text">
            ‚Ä¢ –î–≤–∏–≥–∞–π—Å—è –¥–∂–æ–π—Å—Ç–∏–∫–æ–º –ø–æ —Ü–µ–Ω—Ç—Ä—É<br>
            ‚Ä¢ –°—Ç—Ä–µ–ª—å–±–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –¥–∂–æ–π—Å—Ç–∏–∫–∞<br>
            ‚Ä¢ –ò–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è<br>
            ‚Ä¢ –í—ã–∂–∏–≤–∏ –∫–∞–∫ –º–æ–∂–Ω–æ –¥–æ–ª—å—à–µ
        </p>
        <button class="menu-btn" onclick="closeHowToPlay()">–ù–∞–∑–∞–¥</button>
    </div>
</div>

<!-- Game Over -->
<div id="game-over" class="menu hidden">
    <div class="menu-content">
        <h1 class="title">GAME OVER</h1>
        <p id="final-score" class="text"></p>
        <button class="menu-btn" onclick="restartGame()">–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫</button>
    </div>
</div>

<!-- –ü–∞—É–∑–∞ -->
<div id="pause-menu" class="menu hidden">
    <div class="menu-content">
        <h1 class="title">–ü–ê–£–ó–ê</h1>
        <button class="menu-btn" onclick="resumeGame()">‚ñ∂ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        <button class="menu-btn" onclick="openAchievements()">üéñÔ∏è –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
        <button class="menu-btn" onclick="saveGame(); resumeGame();">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="menu-btn" onclick="saveAndQuit()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤—ã–π—Ç–∏</button>
        <button class="menu-btn" onclick="quitWithoutSave()">üö™ –í—ã–π—Ç–∏</button>
    </div>
</div>

<!-- –†–µ–π—Ç–∏–Ω–≥ -->
<div id="leaderboard-menu" class="menu hidden">
    <div class="menu-content">
        <h2 class="title">–†–ï–ô–¢–ò–ù–ì</h2>
        <div id="leaderboard-content" class="leaderboard-content"></div>
        <button class="menu-btn" onclick="closeLeaderboard()">–ù–∞–∑–∞–¥</button>
    </div>
</div>

<!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
<div id="achievements-menu" class="menu hidden">
    <div class="menu-content">
        <h2 class="title">–î–û–°–¢–ò–ñ–ï–ù–ò–Ø</h2>
        <div id="achievements-content" class="achievements-content"></div>
        <button class="menu-btn" onclick="closeAchievements()">–ù–∞–∑–∞–¥</button>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏—è -->
<div id="revive-modal" class="menu hidden">
    <div class="menu-content">
        <h2 class="title">–í–û–ó–†–û–ñ–î–ï–ù–ò–ï</h2>
        <p class="text" style="font-size: 12px; margin: 20px 0;">
            –í—ã –ø–æ–≥–∏–±–ª–∏! –•–æ—Ç–∏—Ç–µ –≤–æ–∑—Ä–æ–¥–∏—Ç—å—Å—è –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É?
        </p>
        <div style="padding: 15px; background: rgba(0, 0, 0, 0.3); border: 2px solid #555; margin: 15px 0;">
            <p class="text" style="font-size: 11px; color: #aaa; margin-bottom: 10px;">–°—Ç–æ–∏–º–æ—Å—Ç—å –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏—è:</p>
            <p class="text" style="font-size: 16px; color: #ffd700; font-weight: bold;">
                <span id="revive-cost">0</span> ü™ô
            </p>
            <p class="text" style="font-size: 10px; color: #888; margin-top: 10px;">
                –í–∞—à–∏ –º–æ–Ω–µ—Ç—ã: <span id="revive-player-coins" style="color: #ffd700;">0</span> ü™ô
            </p>
        </div>
        <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
            <button class="menu-btn" id="revive-confirm-btn" style="background: #4a4; min-width: 150px;">
                –í–æ–∑—Ä–æ–¥–∏—Ç—å—Å—è
            </button>
            <button class="menu-btn" id="revive-cancel-btn" style="background: #a44; min-width: 150px;">
                –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É
            </button>
        </div>
    </div>
</div>

<!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–π –∏–≥—Ä–µ -->
<div id="new-game-warning" class="menu hidden">
    <div class="menu-content">
        <h2 class="title" style="color: #ff4444;">‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!</h2>
        <p class="text" style="font-size: 12px; line-height: 1.8; margin: 20px 0;">
            –ù–∞—á–∞–≤ –Ω–æ–≤—É—é –∏–≥—Ä—É, –≤—ã –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –≤–µ—Å—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:<br><br>
            ‚Ä¢ –¢–µ–∫—É—â–∞—è –≤–æ–ª–Ω–∞ –∏ —Å—á–µ—Ç<br>
            ‚Ä¢ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã<br>
            ‚Ä¢ –í—Å–µ –º–æ–Ω–µ—Ç–∫–∏, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏<br><br>
            –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?
        </p>
        <button class="menu-btn" onclick="confirmNewGame()" style="background: #ff4444; border-color: #ff6666;">–î–∞, –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É</button>
        <button class="menu-btn" onclick="cancelNewGame()">–û—Ç–º–µ–Ω–∞</button>
    </div>
</div>

<!-- –ú–∞–≥–∞–∑–∏–Ω (–ø–æ—Å–ª–µ –≤–æ–ª–Ω—ã) -->
<div id="shop-menu" class="menu hidden">
    <div class="menu-content">
        <h2 class="title">üõí –ú–ê–ì–ê–ó–ò–ù</h2>
        <p class="text" style="font-size: 12px; margin-bottom: 20px;">
            –ú–æ–Ω–µ—Ç–∫–∏: <span id="shop-coins-display" style="color: #ffd700;">0</span>
        </p>
        <div id="shop-content" style="max-height: 400px; overflow-y: auto; margin: 20px 0;">
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∞–≥–∞–∑–∏–Ω–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
        <button class="menu-btn" id="shop-close-btn" onclick="closeShop()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É</button>
    </div>
</div>

<!-- –°–∫—Ä–∏–ø—Ç—ã -->
<!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ -->
<script src="js/core/config.js" defer></script>
<script src="js/core/difficulty.js" defer></script>
<script src="js/core/user.js" defer></script>
<script src="js/core/achievements.js" defer></script>
<script src="js/core/upgrades.js" defer></script>
<script src="js/core/save.js" defer></script>
<script src="js/core/sound.js" defer></script>
<script src="js/core/main.js" defer></script>
<script src="js/core/grid.js"></script>

<!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
<script src="js/controls/input.js" defer></script>
<script src="js/controls/joysticks.js" defer></script>

<!-- –ò–≥—Ä–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ -->
<script src="js/entities/player.js" defer></script>
<script src="js/entities/zombies.js" defer></script>
<script src="js/entities/bullets.js" defer></script>
<script src="js/entities/hearts.js" defer></script>
<script src="js/entities/coins.js" defer></script>
<script src="js/entities/buffs.js" defer></script>
<script src="js/entities/obstacles.js" defer></script>

<!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
<script src="js/ui/pixel_heart.js" defer></script>
<script src="js/ui/hud.js" defer></script>
<script src="js/ui/settings_sound.js" defer></script>


<!-- –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ -->
<script src="js/game/wave.js" defer></script>

</body>
</html>
